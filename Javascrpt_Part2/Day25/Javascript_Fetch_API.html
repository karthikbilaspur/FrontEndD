<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API in JavaScript</title>
</head>
<body>
    <h1>Fetch API in JavaScript</h1>
    <p>The Fetch API is a modern interface in JavaScript that allows you to make HTTP requests. It replaces the older XMLHttpRequest method and provides a cleaner and more flexible way to fetch resources asynchronously.</p>

    <h2>Syntax:</h2>
    <pre>
        fetch(url, options)
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
    </pre>

    <h2>How Fetch API Works:</h2>
    <ul>
        <li>A request is sent to the specified URL.</li>
        <li>The server processes the request and sends a response.</li>
        <li>The response is converted to JSON (or another format) using .json().</li>
        <li>Errors are handled using .catch() or try-catch blocks.</li>
    </ul>

    <h2>Common HTTP Request Methods in Fetch API:</h2>
    <ul>
        <li><strong>GET:</strong> Retrieves data from a server.</li>
        <li><strong>POST:</strong> Sends data to a server.</li>
        <li><strong>PUT:</strong> Updates data on a server.</li>
        <li><strong>DELETE:</strong> Deletes data from a server.</li>
    </ul>

    <h2>Basic Fetch Request:</h2>
    <pre>
        fetch('https://fakestoreapi.com/products/1')
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
    </pre>

    <h2>Handling Response Status Codes:</h2>
    <pre>
        fetch('https://api.example.com/data')
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Network response was not ok');
                }
            })
            .then(data => console.log(data))
            .catch(error => console.error('There was a problem with the fetch operation:', error));
    </pre>

    <h2>Using async/await with Fetch API:</h2>
    <pre>
        async function getP() {
            try {
                const response = await fetch('https://fakestoreapi.com/products');
                if (response.ok) {
                    const data = await response.json();
                    console.log(data);
                } else {
                    throw new Error('Failed to fetch data');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }
        getP();
    </pre>

    <h2>Sending Custom Headers with Fetch API:</h2>
    <pre>
        fetch('https://fakestoreapi.com/products', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer YOUR_TOKEN'
            },
            body: JSON.stringify({ name: 'Pranjal', age: 25 })
        })
        .then(response => response.json())
        .then(result => console.log(result));
    </pre>

    <h2>Handling Different Request Methods (POST, PUT, DELETE):</h2>
    <h3>GET Request:</h3>
    <pre>
        fetch('https://fakestoreapi.com/products/1')
            .then(response => response.json())
            .then(items => console.log(items));
    </pre>

    <h3>POST Request:</h3>
    <pre>
        const data = { name: 'Pranjal', age: 25 };
        fetch('https://fakestoreapi.com/products', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => console.log(result));
    </pre>

    <h3>PUT Request:</h3>
    <pre>
        const updatedData = { id: 1, price: 300 };
        fetch('https://fakestoreapi.com/products/1', {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(updatedData)
        })
        .then(response => response.json())
        .then(result => console.log(result));
    </pre>

    <h3>DELETE Request:</h3>
    <pre>
        fetch('https://fakestoreapi.com/products/1', {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(result => console.log('Deleted:', result));
    </pre>

    <h2>Handling Errors in Fetch API:</h2>
    <pre>
        fetch('https://api.example.com/data')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => console.log('Data:', data))
            .catch(error => console.error('Fetch error:', error.message));
    </pre>
</body>
</html>